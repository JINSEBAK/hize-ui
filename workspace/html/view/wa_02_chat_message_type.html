<!DOCTYPE html>
<html lang="ko">
    <head>
        @@include('../common/resources.html', { "type" : "admin" })
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
        <style>
            table caption { text-align: center; font-weight: bold;}
            #guideTb small { color: #aaa; }
            #guideTb .em { color: #4f5db2; }
        </style>
    </head>
    <body class="p-chat">

        <!-- header -->
        @@include('../common/header.html', { "active" : "활성화되어야하는 메뉴" })
       
        <div class="container-fluid">
            <div class="row">

                <!-- gnb -->
                @@include('../common/navigation.html')

                <!-- contents -->
                <div class="main" id="main">
                    @@include('../common/title.html', { "title" : "채팅 <span class='icon icon-info'></span>", "sub" : "참여중인 채팅리스트를 관리하고 채팅을 할 수 있습니다." })

                    <div class="contents chat-contents">
                        <div class="col-chat col-chat-lf" style="width: calc(100% - 520px)">
                            <div class="chat">
                                <div class="chat-body">
                                    <div class="scroll" style="min-height: 720px">
                                        <div class="inner">

                                            <!-- 날짜 -->
                                            <div class="date">2021-05-14</div>

                                            <!-- 일반 사용자 메세지 -->
                                            <div class="msg general">
                                                <div class="img" data-toggle="popover" data-placement="right" title="나회원"
                                                data-html="true" data-content='가입기간: 2021-03-01 ~ 2021-05-20<br>가입비: 100만원 <button class="btn btn-secondary btn-sm">블락해제</button>'>
                                                    <img src="../assets/images/photos/user-img-default.png">
                                                </div>
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="name">나회원</span>
                                                        <span class="id">(namem79)</span>
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">오늘도 성투하세요.</div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- 블락 회원: 파란색 도트로 표시-->
                                            <div class="msg general blocked">
                                                <div class="img" data-toggle="popover" data-placement="right" title="김수로"
                                                data-html="true" data-content='가입기간: 2021-03-01 ~ 2021-05-20<br>가입비: 100만원 <button class="btn btn-secondary btn-sm">블락해제</button>'>
                                                    <img src="../assets/images/photos/user-img-default.png">
                                                </div>
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="name">김수로</span>
                                                        <span class="id">(surokim)</span>
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner" id="delExample">여러분도 1**!</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 입장, 퇴장 메시지-->
                                            <div class="wlc">
                                                <span>오길동님이 입장하셨습니다.</span>
                                            </div>
                                            <div class="wlc">
                                                <span>오길동님이 나가셨습니다.</span>
                                            </div>


                                            <!-- 내가 방장 -->
                                            <div class="msg my">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">분석을 통해 실시간 종목을 추천합니다.<br>오늘도 성공투자!</div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- 신호메시지 -->
                                            <div class="msg my signal">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <div class="time">오전 10:00</div>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            <div class="signal-type ts">[매수] 신호입니다.</div>
                                                            <ul class="signal-info">
                                                                <li>삼성전자 005930</li> 
                                                                <li>매수가: 80,000원 이하</li>
                                                                <li>비중: 10%</li>
                                                            </ul>
                                                            <p>
                                                                현구간 3차 매수 진행합니다.<br>
                                                                의도적인 흔들기!! 비중확보 후 추가 대응 통해 빠른 익절 진행하도록 하겠습니다.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="msg my signal">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <div class="time">오전 10:00</div>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            <div class="signal-type tb">[매도] 신호입니다.</div>
                                                            <ul class="signal-info">
                                                                <li>삼성전자 005930</li> 
                                                                <li>매수가: 80,000원 이하</li>
                                                                <li>비중: 10%</li>
                                                            </ul>
                                                            <p>
                                                                삼성전자 현구간 2차 매수 진행합니다.<br>
                                                                의도적인 흔들기!! 비중확보 후 추가대응 통해 빠른 익절 진행하겠습니다.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="msg my signal">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <div class="time">오전 10:00</div>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            <div class="signal-type gs">[알림] 신호입니다.</div>
                                                            <p>
                                                                잠시 시간할애로 최근 시장 주요 이슈와 관련된 섹터 진단 시간을 갖도록 하겠습니다.<br>
                                                                20분부터 진행할 예정이니 편하게 차한잔하면서 
                                                                대기해주세요 ^^
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- 나 이외 다른 방장의 신호 -->
                                            <div class="msg general signal">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <div class="time">오전 10:00</div>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            <div class="signal-type ts">[매수] 신호입니다.</div>
                                                            <ul class="signal-info">
                                                                <li>삼성전자 005930</li> 
                                                                <li>매수가: 80,000원 이하</li>
                                                                <li>비중: 10%</li>
                                                            </ul>
                                                            <p>
                                                                현구간 3차 매수 진행합니다.<br>
                                                                의도적인 흔들기!! 비중확보 후 추가 대응 통해 빠른 익절 진행하도록 하겠습니다.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="msg general signal">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <div class="time">오전 10:00</div>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            <div class="signal-type tb">[매도] 신호입니다.</div>
                                                            <ul class="signal-info">
                                                                <li>삼성전자 005930</li> 
                                                                <li>매수가: 80,000원 이하</li>
                                                                <li>비중: 10%</li>
                                                            </ul>
                                                            <p>
                                                                삼성전자 현구간 2차 매수 진행합니다.<br>
                                                                의도적인 흔들기!! 비중확보 후 추가대응 통해 빠른 익절 진행하겠습니다.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="msg general signal">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <div class="time">오전 10:00</div>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            <div class="signal-type gs">[알림] 신호입니다.</div>
                                                            <p>
                                                                잠시 시간할애로 최근 시장 주요 이슈와 관련된 섹터 진단 시간을 갖도록 하겠습니다.<br>
                                                                20분부터 진행할 예정이니 편하게 차한잔하면서 
                                                                대기해주세요 ^^
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- 블록 회원에 대한 답장 -->
                                            <div class="msg my">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <div class="time">오전 10:10</div>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            <p class="rp-msg">
                                                                <strong>주식수로왕(surokim)</strong>에게 답장<br>
                                                                여러분도 1**!
                                                            </p>
                                                            <p class="rp-msg">
                                                                채팅방에서 가쉽에 대한 글은 올리지 말아주세요.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- 장문 메시지 -->
                                            <div class="msg general">
                                                <div class="img" data-toggle="popover" data-placement="right" title="나회원"
                                                data-html="true" data-content='가입기간: 2021-03-01 ~ 2021-05-20<br>가입비: 100만원 <button class="btn btn-secondary btn-sm">블락해제</button>'>
                                                    <img src="../assets/images/photos/user-img-default.png">
                                                </div>
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="name">나회원</span>
                                                        <span class="id">(namem79)</span>
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            11일 코스피는 전 거래일(3224.64)보다 24.68포인트(0.77%) 오른 3249.32에 마감했다. 지수는 전일 대비 0.07% 오른 3226.98에 출발해 장중 상승폭을 키우며 거래를 마쳤다. 지난 7일 기록한 종가 기준 코스피 사상 최고치(3252.12)를 3포인트가량 눈앞에 뒀다.<br><br>
                                                            유가증권시장에서 개인은 홀로 4783억원어치를 팔아치웠다. 반면 기관과 외국인은 각각 2738억원, 1769억원을 매수했다.<br><br>
                                                            업종별로는 대체로 올랐다. 철강금속(3.50%), 화학(1.79%), 운수창고(1.59%), 통신업(1.04%), 전기전자(1.03%), 제조업(1.00%), 의료정밀(0.91%) 등이 시장상승률을 웃돌았다.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="msg my">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            11일 코스피는 전 거래일(3224.64)보다 24.68포인트(0.77%) 오른 3249.32에 마감했다. 지수는 전일 대비 0.07% 오른 3226.98에 출발해 장중 상승폭을 키우며 거래를 마쳤다. 지난 7일 기록한 종가 기준 코스피 사상 최고치(3252.12)를 3포인트가량 눈앞에 뒀다.<br><br>
                                                            유가증권시장에서 개인은 홀로 4783억원어치를 팔아치웠다. 반면 기관과 외국인은 각각 2738억원, 1769억원을 매수했다.<br><br>
                                                            업종별로는 대체로 올랐다. 철강금속(3.50%), 화학(1.79%), 운수창고(1.59%), 통신업(1.04%), 전기전자(1.03%), 제조업(1.00%), 의료정밀(0.91%) 등이 시장상승률을 웃돌았다.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- 이모티콘: 단독 발송 시 이미지만 노출 -->
                                            <div class="msg general">
                                                <div class="img" data-toggle="popover" data-placement="right" title="나회원"
                                                data-html="true" data-content='가입기간: 2021-03-01 ~ 2021-05-20<br>가입비: 100만원 <button class="btn btn-secondary btn-sm">블락해제</button>'>
                                                    <img src="../assets/images/photos/user-img-default.png">
                                                </div>
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="name">나회원</span>
                                                        <span class="id">(namem79)</span>
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon emo">
                                                        <div class="inner">
                                                            <img src="../assets/images/photos/e-02-12.png" alt="따봉">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="msg my">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon emo">
                                                        <div class="inner">
                                                            <img src="../assets/images/photos/e-02-12.png" alt="최고">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 이모지 멀티개 선택 시 말풍선 담아서 처리 -->
                                            <div class="msg general">
                                                <div class="img" data-toggle="popover" data-placement="right" title="나회원"
                                                data-html="true" data-content='가입기간: 2021-03-01 ~ 2021-05-20<br>가입비: 100만원 <button class="btn btn-secondary btn-sm">블락해제</button>'>
                                                    <img src="../assets/images/photos/user-img-default.png">
                                                </div>
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="name">나회원</span>
                                                        <span class="id">(namem79)</span>
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            😀😀😀
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="msg my">
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">
                                                            👈👎
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 말풍선 클릭 시 샘플 -->
                                            <div class="msg general">
                                                <div class="img" data-toggle="popover" data-placement="right" title="나회원"
                                                data-html="true" data-content='가입기간: 2021-03-01 ~ 2021-05-20<br>가입비: 100만원 <button class="btn btn-secondary btn-sm">블락해제</button>'>
                                                    <img src="../assets/images/photos/user-img-default.png">
                                                </div>
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="name">나회원</span>
                                                        <span class="id">(namem79)</span>
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">삭제해보세요.</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 나 말고 다른 방장 -->
                                            <div class="msg adm">
                                                <div class="img" data-toggle="popover" data-placement="right" title="방장"
                                                data-html="true" data-content='가입기간: 2021-03-01 ~ 2021-05-20<br>가입비: 100만원 <button class="btn btn-secondary btn-sm">블락해제</button>'>
                                                    <img src="../assets/images/photos/user-img-default.png">
                                                </div>
                                                <div class="info">
                                                    <div class="tk-info">
                                                        <span class="name">방장</span>
                                                        <span class="id">(hoho)</span>
                                                        <span class="time">오전 10:00</span>
                                                    </div>
                                                    <div class="balloon">
                                                        <div class="inner">엇, 진짜요? 어떤 소식인지 궁금 합니당 ㅎㅎ</div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-chat col-chat-rt" style="width: 520px;">
                            <table class="table" id="guideTb">
                                <caption>채팅 대화 메시지 타입별 스타일 클래스 가이드</caption>
                                <colgroup>
                                    <col style="width: 25%">
                                </colgroup>
                                <tbody> 
                                    <tr>
                                        <th>공통</th>
                                        <td><strong class="em">.msg</strong></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <th rowspan="2">일반 사용자</th>
                                        <td><span class="em">.general</span></td>
                                        <td></td>
                                        <td>
                                            <small>왼쪽에 위치</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>블락 회원</td>
                                        <td><span class="em">.blocked</span></td>
                                        <td>
                                            <small>파란색 도트 표시</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>나(방장)</th>
                                        <td><span class="em">.my</span></td >
                                        <td></td>
                                        <td>
                                            <small>오른쪽에 위치</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>나외의 방장</th>
                                        <td><span class="em">.adm</span></td>
                                        <td></td>
                                        <td>
                                            <small>오른쪽에 위치<br>흰색 배경 + 노란색 보더</small>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th rowspan="5">신호</th>
                                        <td><span class="em">.signal</span></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>타입 공통</td>
                                        <td><span class="em">.signal-type</span></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>매수</td>
                                        <td><span class="em">.signal-type.ts</span></td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>매수</td>
                                        <td><span class="em">.signal-type.tb</span></td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>알림</td>
                                        <td><span class="em">.signal-type.gs</span></td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <td colspan="3">
                                            위의 클래스들을 조합하여 사용<br>

                                            ex) 나 외의 다른 방장이 보낸 신호:  .msg + .general + .signal<br>
                                            &lt;div class="msg adm signal"&gt; ~~ &lt;/div&gt;

                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @@include('../common/scripts.html')
        <script>
            $(function() {
                var divHeight = '';
                var browserHeight = document.documentElement.clientHeight;
                //divHeight = browserHeight - (90 + 49 + 82 + 42 + 12);
                divHeight = browserHeight - (106 + 62 + 60 + 46 + 24);

                $('.chat-contents').find('.tab-content').css('height', divHeight+'px');
                //$('.chat-body').find('.scroll').css('height', divHeight-78+'px');
                $('.chat-body').find('.scroll').css('height', divHeight-48+'px');

                $('.chat-body').find('.scroll').scrollTop($('.chat-body .scroll').find('.inner').height() );


                // 말풍선 클릭
                $('.msg.general').find('.balloon').on('click', function() {
                    if ( $(this).hasClass('selected') ) {
                        // $(this).removeClass('selected');
                        // $(this).find('.btn-delete').remove();
                    } else if ( $(this).hasClass('del')) {
                        return false;
                    } else {
                        const _html = '<div class="btn-capsule">'
                                +       '<button type="button" class="btn-del-chat">삭제</button>'
                                +       '<span></span>'
                                +       '<button type="button" class="btn-rpl-chat">답장</button>'
                                +'</div>';

                        $(this).addClass('selected');
                        $(this).append(_html);

                        $('.btn-del-chat').on('click', function() {
                            if (!$(this).parents('.balloon').hasClass('del')) {
                                $(this).parents('.balloon').addClass('del').find('.inner').text('삭제된 메세지입니다.');
                                $(this).parents('.balloon').find('.btn-capsule').remove();
                            }
                        });

                        $('.btn-rpl-chat').on('click', function() {
                            $('.block-msg-reply').fadeIn();
                            $(this).parents('.balloon').find('.btn-capsule').remove();
                            $('textarea').focus();
                        });
                    }
                });

            });
        </script>
    </body>
</html>